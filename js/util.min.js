!function(a,b){function c(b){var c=b.ua=navigator.userAgent;b.isWebKit=/webkit/i.test(c),b.isMozilla=/mozilla/i.test(c),b.isIE=/msie/i.test(c),b.isFirefox=/firefox/i.test(c),b.isChrome=/chrome/i.test(c),b.isSafari=/safari/i.test(c)&&!this.isChrome,b.isMobile=/mobile/i.test(c),b.isOpera=/opera/i.test(c),b.isIOS=/ios/i.test(c),b.isIpad=/ipad/i.test(c),b.isIpod=/ipod/i.test(c),b.isIphone=/iphone/i.test(c)&&!this.isIpod,b.isAndroid=/android/i.test(c),b.supportStorage="localStorage"in a,b.supportOrientation="orientation"in a,b.supportDeviceMotion="ondevicemotion"in a,b.supportTouch="ontouchstart"in a,b.supportCanvas=null!==document.createElement("canvas").getContext,b.cssPrefix=b.isWebKit?"webkit":b.isFirefox?"Moz":b.isOpera?"O":b.isIE?"ms":""}a.util=util={},util.touch={startX:0,startY:0,endX:0,endY:0,registerEvent:function(a){arguments[1]&&b.isFunction(arguments[1])&&a[0].addEventListener("touchstart",arguments[1],!1),arguments[2]&&b.isFunction(arguments[2])&&a[0].addEventListener("touchmove",arguments[2],!1),arguments[3]&&b.isFunction(arguments[3])&&a[0].addEventListener("touchend",arguments[3],!1)},removeEvent:function(a){arguments[1]&&b.isFunction(arguments[1])&&a[0].removeEventListener("touchstart",arguments[1],!1)},initTap:function(){function f(){c&&clearTimeout(c),c=null,a={}}var c,d,e,a={};b(function(){b(document.body).on("touchstart",function(c){d=Date.now(),e=d-(a.last||d);var c=c.originalEvent;a.el=b(c.touches[0].target),e>0&&250>=e&&(a.isDoubleTap=!0),a.last=d}).on("touchmove",function(a){var a=a.originalEvent;f()}).on("touchend",function(){"last"in a&&(c=setTimeout(function(){a.el.trigger("tap"),a.isDoubleTap&&(a.el.trigger("doubleTap"),a={})},10))}).on("touchcancel",f)}),["doubleTap","tap"].forEach(function(a){b.fn[a]=function(b){return this.on(a,b)}})},scrollable:function(a){var c={"-webkit-overflow-scrolling":"touch","overflow-y":"auto"},d=function(a){a.preventDefault()},e=function(a){a.stopPropagation()},f=function(a){0===a.currentTarget.scrollTop?a.currentTarget.scrollTop=1:a.currentTarget.scrollHeight===a.currentTarget.scrollTop+a.currentTarget.offsetHeight&&(a.currentTarget.scrollTop-=1)};1===arguments.length&&(b(a).css(c),b(document).on("touchmove",function(a){d(a)}),b("body").on("touchstart",a,function(a){f(a)}),b("body").on("touchmove",a,function(a){e(a)})),arguments.length>1&&"off"==arguments[1]&&(b(a).css({}),b(document).off("touchmove"),b("body").off("touchstart"),b("body").off("touchmove"))}},util.touch.initTap(),a.console||(a.console=function(){},a.console.info=a.console.debug=a.console.warn=a.console.log=a.console.error=function(a){alert(a)}),a.log=function(){if(arguments.length>0){for(var a="",b=0,c=arguments.length;c>b;b++)a=a+arguments[b]+",";console.log(util.clearLastComma(a))}},c(util),util.clearLastComma=function(a){return a=a.replace(/,$/,"")},util.checkprop=function(a,b){return a in b},util.queryByTag=function(a){return document.getElementsByTagName(a)},util.queryById=function(a){return document.getElementById(a)},util.getRandomNum=function(a,b){if(b>a){var c=b-a,d=Math.random();return a+Math.round(d*c)}return 0},util.pushState=function(a){if(history&&util.checkprop("pushState",history)){var c=b.extend({data:{},title:""},a||{});history.pushState(c.data,c.title,c.url)}},util.replaceState=function(a){if(history&&util.checkprop("replaceState",history)){var c=b.extend({data:{},title:"",url:""},a||{});history.replaceState(c.data,c.title,c.url)}},util.state=function(){return history&&util.checkprop("state",history)?history.state:void 0},util.getTitle=function(){var a=util.queryByTag("title");return a.length>0?a[0].innerText:""},util.registerStateChange=function(b){"onpopstate"in a&&(a.onpopstate=function(){b()})},util.initObjByUrl=function(a){var b=location.href.split("?")[1];b&&a&&b in a&&a[b]()},util.savedata=function(a,b){util.supportStorage&&a&&b&&localStorage.setItem(a,b)},util.getdata=function(a){return util.supportStorage&&a?localStorage.getItem(a):null},util.urlChanger=function(){var a=this;a.observers=[],a.addObserver=function(b){a.observers.push(b)},a.deleteObserver=function(){a.observers.slice(0,a.observers.length)},a._notifyObservers=function(){var b=a.observers.length;console.log(b);for(var c=0;b>c;c++)a.observers[c].update()},a.changeUrl=function(b){window.location.hash=b,a._notifyObservers()}},util.urlObservers=function(a){var b=this;"function"==typeof a&&(b.update=a)},util.routes={},util.routeopen=!1,util.addRoute=function(a,b,c){util.routes[a]={templateId:b,controller:c},util.routeopen||(util.routeopen=!0,util.registerHashchange())},util.removeRoute=function(a){util.routes[a]=null},util.router=function(){var a=location.hash.slice(1)||"/",b=util.routes[a];b&&b.controller&&b.controller()},util.registerHashchange=function(){"onhashchange"in a&&(a.onhashchange=function(){util.router()},a.onload=function(){util.router()})},util.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)},util.clone=function(a){function b(){}return b.prototype=a,new b},util.augment=function(a,b){if(arguments[2])for(var c=2,d=arguments.length;d>c;c++)a.prototype[arguments[c]]=b.prototype[arguments[c]];else for(methodName in b.prototype)a.prototype[methodName]||(a.prototype[methodName]=b.prototype[methodName])};var d=function(){};util.inherit=function(a,b){d.prototype=b.prototype,a.superClass=b.prototype,a.prototype=new d,a.prototype.constructor=a},util.merge=function(a,b,c){for(var d in b)(!c||a.hasOwnProperty(d)||void 0!==a[d])&&(a[d]=b[d]);return a},util.cacheImg=function(a,b,c){var d=a.width,e=a.height,f=util.createDOM("canvas",{width:d,height:e}),g=new Image;if(g.src=a.src,null===f)return!1;var h=f.getContext("2d");h.fillStyle="#EEEEFF",h.fillRect(0,0,d,e),g.onload=function(){h.drawImage(g,0,0);var a=new Image;a.width=d,a.height=e,a.src=f.toDataURL(b||"image/png"),c(a)}},util.createDOM=function(a,b){var c=document.createElement(a);for(var d in b){var e=b[d];if("style"==d)for(var f in e)c.style[f]=e[f];else c[d]=e}return c},util.binarySearch=function(a,b){for(var c=0,d=a.length-1;d>=c;){var e=parseInt((c+d)/2,10);if(b==a[e].name)return e;b<a[e].name?d=e-1:c=e+1}return d+1},util.loading=b.fn.loading=b.loading=function(a){var c=b.extend({content:"",loadingStyle:{},loadingClass:"",textStyle:{"font-size":"1.2em"},textClass:""},a||{}),d=Math.round(1e6*Math.random()+1)+"",e=c.content,f={htmlobj:null,init:function(){f.initHtml(),f.initUI()},initHtml:function(){return f.html||(f.html=b('<div id="j_loader'+d+'" class="j_loader'+d+' ui-loader round-5 ps posf hide"><span class="ui-icon-loading block center roundall o-5"></span><div class="j_content tac"></div></div>')),e&&f.html.find(".j_content").html(e),f.html},initUI:function(){f.html.addClass(c.loadingClass),f.html.css(c.loadingStyle),f.html.find(".j_content").css(c.textStyle),f.html.find(".j_content").addClass(f.textClass),b("body").append(f.html)},setContent:function(a){f.html.find(".j_content").html(a)},show:function(){f.html.removeClass("hide")},hide:function(){f.html.addClass("hide")}};return f.init(),f},util.listload=b.listload=function(a,c){var d=b.extend({lastItemHandle:".list:last-child",loadurl:"",params:null,wrapHandle:"#listbox"},a||{}),e=b(window),f=b(d.wrapHandle),g={getDatabox:function(){return f},setParams:function(a){d.params=a},getParams:function(){return d.params},setData:function(a){g.data=a},getData:function(){return g.data},init:function(){e.scroll(function(){if(b(d.lastItemHandle).is(":visible")&&e.scrollTop()+e.height()>=b(document).height()&&d.loadurl){var a=g.getParams();b.getJSON(d.loadurl,a,function(a){g.setData(a),b.isFunction(c)&&c()})}})}};return g.init(),g}}(window,jQuery||Zepto);