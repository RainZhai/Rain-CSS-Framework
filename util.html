<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Rain CSS > List</title>
<!-- Framework CSS -->
<link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="all"/>
<link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print"/> 
<!--[if lte IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]--> 
<link rel="stylesheet" href="css/rain.css" type="text/css" media="all"/>
<!--[if lt IE 9]><script type="text/javascript" src="js/html5.js"></script><![endif]--> 
<link rel="stylesheet" type="text/css" href="css/manhuaDate.1.0.css">
 <style>
.searchwrap{ transition: all .5s linear; -webkit-transition: all .5s linear; height: 25px; width: 30px; margin: 20px 0 0 35px;}
.searchwrap .searchinner{width: 238px;}
.searchwrap .searchicon{ width: 25px; height: 25px; margin-right: 10px;  border:0 none; cursor: pointer; padding: 0; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMFJREFUeNpiYKAV+P//vwMQr/+PCt4D8XwgNiDWkPn/CYMEUg3ZD8QNUHyfKMOg3kH2hgMWNQVoahSwGYQcJg54XN2ApK4fmwK4d4gIx/fY1DKhqTtIRJxcgNIO+AwiBTzA59zzBLwlgDcY0KK+gMgkkoBNgQFaOmnA4hL0dFaAy7YELNliPxSTlsqhhr3/TxoAG8aIxTBQis0HYgMo/gCNoYVQej0QC6BpSySndDDA4ur35BY1GIZRUm4hG9YPEGAAtovdMQCq9tIAAAAASUVORK5CYII=) no-repeat center center;}
.searchwrap .searchicon:hover{background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQpJREFUeNpiYKASYEQXsN390wFI5QNxAJLwByDeAMQTD7uyXyBoENCQ+UAqgYDliUDDFuA0CIshB4D4IJQdD8QK+AxjRPLOfiRvBAIVHkBzbQGQ6kdSYwhU8wAmzwSl85H0YBgCAkCxCUCqEcoVQNMDNwgWsAewGYJkWAPUNSBggM0gGDhIREzDYs0Bn0GkgAfYDII51x+fTmCACyC5BKtBG2D+hsYOLtCPxF6IzaCJyIqBhjWguwRLOhPAlSBBiuajZQusAYstYaJnkQSo8wVICHSwYdgyrQI0sRlA8QdowC6E0uuxWJTISGqcAy0ygGYnZMM+kJyOoMWII1KSAQc8WQkSi2ETAAIMADJBW9xL2neoAAAAAElFTkSuQmCC) no-repeat center center; }
.searchwrap .searchbox{ margin:4px 0;  width: 200px; background: none; border:0 none; color: #fff;}
.wauto{ width: 238px!important; background: #0067a3; border-radius: 3px; }

 </style>
</head>
<body class="body">
	<div class="header headerBlue">
  	<nav class="lsn posr clearfix">
    	<a href="http://www.webdevelopmentmachine.com" target='_blank' class="headerLink headerLinkBlue l pr pl ib tdn">首页home</a>
    	<a href="http://www.webdevelopmentmachine.com/blog" target='_blank' class="headerLink headerLinkBlue l pr pl ib tdn">博客blog</a>
    	<a href="http://www.webdevelopmentmachine.com/demo/game.html" target='_blank' class="headerLink headerLinkBlue l pr pl ib tdn">游戏game</a>
    </nav>
  </div>
	<div class="headerM headerGrey">
  	<div class="container posr">
    	<div class="l"><a class="tdn block ptll fsxxl" href="index.html">Rain CSS</a></div>
    </div>
  </div>
  
	<div class="container mt">
          <p>搜索框组件</p>
          <div class="bgg">
            <div class="j_searchwrap searchwrap oh">
            <div class="searchinner  clearfix"><button  class="j_searchicon searchicon block l" ></button> <input type="text" class="j_searchbox searchbox l" /></div>
            </div>
          </div>
          <p>日期</p>
          <input type="text" class="ps w-10" id="starttime" name="starttime" readonly="true" />    
          <p>下拉菜单</p>
          <div class="j_linksbox link ib posr">
            <a href="javascript:void(0);" class="ib">
              <span>网站导航</span> <em class="ng-iconfont down"></em>
            </a>
            <div class="j_sitenav ng-sn-site-nav posa oh" style="display: none;"></div>
          </div>


		<div class="paddingTop">
	      <footer class="footer socialFooter c bt">
	        <p class="bottom pt pb">Copyright 2010-2014 Web Development Machine All rights reserved.</p>
	      </footer>
		</div>
	</div>
<script type="text/javascript" src='js/jquery-1.7.2.js'></script>
<script type="text/javascript" src='js/util.js'></script>
<script type="text/javascript" src="js/manhuaDate.1.0.js"></script>
<script type="text/javascript">

util.ob = $({});
$.subscribe = function () {
  util.ob.on.apply(util.ob, arguments);
};

$.unsubscribe = function () {
  util.ob.off.apply(util.ob, arguments);
};

$.publish = function () {
  util.ob.trigger.apply(util.ob, arguments);
};

//return util;
//观察者模式
//发布者
function Publisher(){
  this.subscribers = [];
};
//发布方法
Publisher.prototype.deliver = function(data){
  this.subscribers.forEach(function(fn){
    fn(data);
  });
  return this;
};
//订阅函数
Function.prototype.subscribe = function(publisher){
  var that = this;
  var alreadyExists = publisher.subscribers.some(function(el){
    return el===that;
  });
  if(!alreadyExists){
    publisher.subscribers.push(this);
  }
  return this;
};
//取消订阅
Function.prototype.unsubscribe = function(publisher){
  var that = this;
    //log(publisher.subscribers);
  publisher.subscribers = publisher.subscribers.filter(function(el){
    //log(el);
    return el !==that;
  });
  return this;
};
//回调函数
function handle(e, a) {
    console.log(a);
};
//订阅
$.subscribe("/some/topic", handle);
//发布
$.publish("/some/topic", ["dsfkdshfkdshfkhsdj"]); // 输出abc

//用法
var NewYorkTimes = new Publisher;
var sdfds = new Publisher;
var Joe = function(from) {
    console.log('joe收到 '+from);
};
Joe.subscribe(NewYorkTimes).subscribe(sdfds);
NewYorkTimes.deliver('NewYorkTimes 报纸');
sdfds.deliver('好乱七八糟的 报纸');
Joe.unsubscribe(NewYorkTimes);
//获取base64编码图片
var img =util.cacheImg({src:"images/logo.png",width:200,height:70},"image/png", function(img){
	log(img.src);
	$("body").append(img);
});

$(document).one('hidden.bs.modal', function() {
          log(1434324);      
});
$(document).trigger('hidden.bs.modal');

//搜索框组件
window.Common = {};
Common.searchbox = function(callback){
  this.init(callback);
}
Common.searchbox.prototype = {
  init: function(callback){
      var me = this;
      me.searchbox = $('.j_searchbox');
      me.registerEvent(callback);
  },
  registerEvent: function(callback){
      var me = this;
      var searchbox = me.searchbox;
      $(".j_searchicon").on("click", function(){
        $(".j_searchwrap").toggleClass("wauto");
      });


      searchbox.on("blur", function(){
        $(".j_searchwrap").toggleClass("wauto");
      });


      $(document).on("keypress", function(event) {
        if($('.j_searchbox').val()){
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
               if(typeof(callback) =="function"){
                callback();
               }
            }
        }
      });
  }
}
var searchbox = new Common.searchbox();

$(function (){
//日期显示
$("#starttime").manhuaDate({               
  handlerClass: ".j_calender1", 
  Event : "click",//可选               
  Left : 0,//弹出时间停靠的左边位置
  Top : -16,//弹出时间停靠的顶部边位置
  fuhao : "-",//日期连接符默认为-
  isTime : false,//是否开启时间值默认为false
  beginY : 2015,//年份的开始默认为1949
  endY :2100//年份的结束默认为2049
});
});
</script>
</body>
</html>