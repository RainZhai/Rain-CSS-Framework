require.config({urlArgs:"v="+new Date().getTime(),"baseUrl":"./js/",paths:{jquery:"lib/jquery-1.7.2.min",html:"lib/freehtml.min",template:"lib/template",util:"lib/util.min",swipe:"lib/swipe.min",slide:"lib/slide.min",headview:"app/view/head",footview:"app/view/foot",navview:"app/view/nav",commondata:"http://wande.me/app/js/app/data/common",searchheadview:"app/view/searchHead",searchmainview:"app/view/searchMain",listview:"app/view/list",cateview:"app/view/category",catedata:"http://wande.me/app/js/app/data/category",topicview:"app/view/topic",topicdetailview:"app/view/topicdetail",gamepicview:"app/view/gamepic",gamepicdetailview:"app/view/gamepicdetail",wplistview:"app/view/wplist",wplistdetailview:"app/view/wplistdetail",json:"app/service/json"},shim:{"util":{deps:["jquery"],exports:"util"},"swipe":{deps:["jquery"],exports:"swipe"},"slide":{deps:["jquery","util"],exports:"slide"}},priority:["jquery"]});require(["jquery","html","util"],function($,_html,util){var html=_html.htmlObj;var headhtml;var navhtml;var foothtml;var gamelist;var slide;var prefix="http://wande.me/app/";var loading=new util.loading({loadingClass:"bglgrey"});var tip=new util.loading({loadingClass:"bglgrey",icon:false});var event="click";if(util.isIOS||util.isAndroid){event="tap"}var main=new html("#body");util.addRoute("/","",function(){main.remove();main.add(headhtml).add(slide).add(navhtml).add(gamelist).add(foothtml)});util.addRoute("/nav1","#main",function(){main.remove();main.add(headhtml).add(slide).add(navhtml).add(gamelist).add(foothtml)});util.addRoute("/nav2","#main",function(){main.remove("#main");loading.setContent("正在加载...").show();$.getScript(prefix+"js/app/data/gamelist2.js",function(){main.remove("#main");loading.hide();var d=data;require(["listview"],function(l){var list=l(d);main.add(list).add(foothtml)})})});util.addRoute("/nav3","#main",function(){main.remove();require(["cateview","catedata"],function(c,d){var list=c(d);main.add(headhtml).add(list).add(foothtml)})});util.addRoute("/nav4","#main",function(){main.remove();require(["topicview"],function(t){loading.setContent("正在加载...").show();$.getScript(prefix+"js/app/data/topic.php",function(d){var d=data;if(d.list.length>0){var list=t(d);main.add(headhtml).add(list).add(foothtml)}else{tip.setContent("没有记录").show(1000)}loading.hide()})})});main.find(".j_catelist").live(event,function(){main.remove();var c=this.name;require(["listview"],function(l){loading.show();$.getScript(prefix+"js/app/data/searchcate.php?c="+c,function(){loading.hide();var d=data;smainhtml=l(d);main.add(headhtml).add(smainhtml);window.location.hash="catedetail"})})});main.find(".j_topicitem").live(event,function(){main.remove();var c=this.name;require(["topicdetailview"],function(l){loading.show();$.getScript(prefix+"js/app/data/searchtopic.php?c="+c,function(d){var d=data;loading.hide();smainhtml=l(d);main.add(headhtml).add(smainhtml);window.location.hash="topicdetail"})})});util.addRoute("/gamepic","#gamepic",function(){main.remove();require(["gamepicview"],function(l){loading.show();$.getScript(prefix+"js/app/data/gamepic.js",function(){var d=data;loading.hide();smainhtml=l(d);main.add(headhtml).add(smainhtml).add(foothtml)})})});main.find(".j_picitem").live(event,function(){main.remove();var i=parseInt(this.name);require(["gamepicdetailview","slide"],function(l,s){loading.show();$.getScript(prefix+"js/app/data/gamepic.js",function(){var d=data;loading.hide();smainhtml=l(d.list[i]);main.add(headhtml).add(smainhtml).add(foothtml);var slide=new $.slide({selector:"#slide",src:[],alt:[],text:[],fix:false,width:320,height:195,images:1,slides:1,length:200,control:true,controlwidth:0,btnLeftStyle:{"left":"10px","bottom":"50%","width":"40px"},btnRightStyle:{"right":"10px","bottom":"50%","width":"40px"},loop:true,auto:false,speed:600,delay:5000,preloadamt:3,before:function(){if(!(util.isIOS||util.isAndroid)){$("#slide").addClass("w-40 mlrauto")}}});window.location.hash="gamepicdetail"})})});var gpicdata;util.addRoute("/gamepic2","#gamepic2",function(){main.remove("#main").remove(slide).remove("#mainnav");require(["wplistview"],function(l){loading.show();if(gpicdata){loading.hide();smainhtml=l(d);main.add(smainhtml)}else{$.getJSON("http://wande.me/haowan/api/get_tag_posts/?tag_slug=%E6%B8%B8%E6%88%8F&callback=?&read_more=More&count=5",function(d){gpicdata=d;loading.hide();smainhtml=l(d);main.add(smainhtml)})}})});util.addRoute("/search","#body",function(){main.remove("#header").remove("#main").remove(slide).remove("#mainnav");require(["jquery","searchheadview","searchmainview","listview"],function($,h,m,l){var sheadhtml=h({});var smainhtml;var searchtips=main.find("#searchtips");main.add(sheadhtml);main.find("#searchbox").on("keyup",function(){var me=$(this);if(me.val()){main.find("#clearbtn").show()}else{main.find("#clearbtn").hide()}});main.find("#searchbtn").on(event,function(){if(main.find("#searchbox").val()){var param=util.filter(main.find("#searchbox").val());loading.show();$.getScript(prefix+"js/app/data/searchresult.php?p="+param,function(d){var d=data;
main.remove("#main");loading.hide();smainhtml=l(d);main.add(smainhtml);main.find("#searchtips").show().text("共搜索到"+d.gamelist.length+"条结果")})}else{tip.setContent("请输入搜索关键字").show(1500)}});main.find("#clearbtn").on(event,function(){main.find("#searchbox").val("").focus();$(this).hide()});$.getScript(prefix+"js/app/data/searchsuggest.php",function(d){var d=data;smainhtml=m(d);main.add(smainhtml);main.find("#reSuggest").live(event,function(){loading.setContent("正在加载...").show();$.getScript(prefix+"js/app/data/searchsuggest.php",function(d){main.remove("#main");loading.hide();var d=data;smainhtml=m(d);main.add(smainhtml)})})})})});require(["commondata","listview","swipe","headview","navview","footview"],function(s,l,swipe,head,nav,foot){headhtml=head(s.headdata);foothtml=foot(s.footdata);navhtml=nav(s.navdata);slide=new $.swipe({touchSelector:".c_touch",imgArray:s.slidedata.data,linksArray:s.slidedata.srcs,time:5000,autorun:true,width:main.getJQobj().width(),height:95,responsive:false,tipswrapStyle:{bottom:"10px",right:"5px"}});main.add(headhtml).add(slide).add(navhtml);loading.setContent("正在加载...").show();$.getScript(prefix+"js/app/data/gamelist.js",function(){main.remove("#main");loading.hide();var d=data;gamelist=l(d);main.add(gamelist).add(foothtml)})})});