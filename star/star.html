<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, user-scalable=no ,target-densitydpi=device-dpi ,initial-scale= 0.5"/>
	<meta charset="utf-8">
</head>
<body> 
             <div id="markStar">
                 <img src="ystar.gif" alt="星星评分" title="1个小星星">
                 <img src="ystar.gif" alt="星星评分" title="2个小星星">
                 <img src="ystar.gif" alt="星星评分" title="3个小星星">
                 <img src="ystar.gif" alt="星星评分" title="4个小星星">
                 <img src="ystar.gif" alt="星星评分" title="5个小星星">
                 <input type="hidden" value="5" name="star">
             </div> 
</body>
<script src="../js/jquery-1.7.2.js"></script>
<script src="../js/util.js"></script>
<script>
		var util = util || {};
         /*
         *一个评分的控件 ，输入的参数是一个对象直接量。
         * @paramer contorl: 容器控制器
         * @paramer postv: 加分的星星图片src
         * @paramer nagv: 减分的星星图片src
         * @author: heimanba         
         * */
        util.star=function(opt){
            this.opt=opt||{};
            this.contorl=this.opt.contorl||"#star";
            this.postv=this.opt.postv||"";
            this.nagv=this.opt.nagv||"";
            this.init();
        }
        util.star.prototype={
           init:function(){
               this.bind();
           },
            bind:function(){
                var _flag=true,self=this;//_flag是一个开关。
                $(this.contorl).delegate('img',"mouseover",function(){
                    var _this=$(this), _index=_this.index();
                   _flag&&self.change(_this,_index);
                }).delegate('img','click',function(){
                    _flag=false;
                    var _this=$(this), _index=_this.index();
                    self.change(_this,_index);
                 });
            },
            /*星星改变的方法
            *@paramer handle: 正在点击的或者移入的星星控制器。
            * @paramer handle: 正在点击的或者移入的星星的index、
            * */
            change:function(handle,_index){
                var _num=$(this.contorl).find('input');
                if(handle.attr('src')===this.postv){
                    handle.nextAll().attr('src',this.nagv);
                    _num.val(_index+1);
                }else{
                    handle.attr('src',this.postv).prevAll().attr('src',this.postv);
                    _num.val(_index+1);
                }
            }
        }
    new util.star({contorl:'#markStar',postv:'ystar.gif',nagv:'gstar.gif'});
console.log(util)
</script>
</html>